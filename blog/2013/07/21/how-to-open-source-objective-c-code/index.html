
<!DOCTYPE HTML>
<html lang="en-GB">
<head>
	<meta charset="utf-8">
	<title>Open source Objective-C code with Github and CocoaPods  | Nils Hayat</title>

	<meta name="author" content="Nils Hayat">

<meta name="description" content="Bits about iOS Development"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Nils Hayat" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>



<body>
	<header id="header" class="inner"><h1><a href="/">Nils Hayat</a></h1>
<span class="tagline">iOS Development</span>
<nav id="main-nav"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
	<li><a href="mailto:nilsou+blog@gmail.com">Contact</a></li>
	<li><a href="http://twitter.com/nilsou">Twitter</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
	<li><a href="mailto:nilsou+blog@gmail.com">Contact</a></li>
	<li><a href="http://twitter.com/nilsou">Twitter</a></li>
</ul>
</div>
	</div>
</nav>


</header>

	<div id="content" class="inner"><article class="post">
	<header>
		<h2 class="title">Open Source Objective-C Code With Github and CocoaPods</h2>
		<div class="meta date">








  


<time datetime="2013-07-21T16:33:00-04:00" pubdate data-updated="true">Jul 21<span>st</span>, 2013</time></div>
	</header>
	<div class="entry-content"><p>Last week I decided to open source some classes that I have wrote and that I reuse often in apps so that other developers can benefit from them.
This post has 3 parts: first I talk about how to format you code/project to make it useful to other developers. Then I explain how to put it on Github. And finally I describe what to do to make it available through <a href="http://cocoapods.org">CocoaPods</a>.</p>

<!-- more -->


<h2>Make that project look good</h2>

<h3>Clean up the code itself</h3>

<p>As always when writing code that other people are going to read, you want it to be as clean as possible. Here are a few tips:</p>

<ul>
<li>Removing all commented code that you have left in there.</li>
<li>Name your variables and methods with names that are legible and easy to understand.</li>
<li>Split big methods in multiple small methods (a good guideline is ~25 lines max per method)</li>
<li>Comment the hell of your header file. (This is the only thing that most people using your code will read)</li>
</ul>


<h3>Organize the project</h3>

<p>Often you want to share just a few classes but it is a good idea to include a Demo project so that people can understand how your classes are intended to be used.</p>

<p>Have the files of interest in a folder and the files for the demo project in a different one so as not to confuse your user.</p>

<p>You want the project file to reflect the organization of the project folder:</p>

<p><img src="http://farm8.staticflickr.com/7397/9340191112_5dda8d0ecd_o.png" alt="project organization" /></p>

<p><img src="http://farm4.staticflickr.com/3692/9337404169_20a9e4740a_o.png" alt="project folder" /></p>

<p>Here the class I want to share is <code>NHAlignmentLayout</code> the rest of the files are there to demonstrate how to use it.</p>

<h3>Include a README</h3>

<p>Right an explicit readme with code samples and even screenshots, that will be the homepage for your repo and will likely be the decisive point for if someone who comes to your project will end up using it or not.
Include explicit instructions on how to install you classes (Most likely using <a href="http://cocoapods.org">CocoaPods</a>.</p>

<h3>Include a LICENSE</h3>

<p>When you open source some of your work, you need to define what people can and cannot do with it. This is the role of a license. There are many open-source licenses such as MIT, GNU, BSDâ€¦ You can find which one is best for you by going to <a href="http://choosealicense.com/">Choose A License</a>. This site made by Github will help you find the best license for you.</p>

<h2>Put it on Github</h2>

<h3>Create the Repository</h3>

<p>Go to your Github account and create a new repository for your project. Name it with a name that makes sense, don&rsquo;t name it <code>XXSomethingDemo</code> but rather <code>XXSomething</code> as this is what everybody cares about.
Check the option to add a .gitignore file and choose Objective-C.</p>

<h3>Clone the empty repository on your computer</h3>

<p>Clone the repo you just created in a temp folder on your mac. You don&rsquo;t want to add the repo as a remote for your current git repo in order to start with a fresh repo and a beautiful <em>Initial Commit</em>.</p>

<figure class='code'><div class="highlight"><table><tr></pre></td><td class='code'><pre><code class=''><span class='line'>git clone https://github.com/nilsou/NHAlignmentLayout.git</span></code></pre></td></tr></table></div></figure>


<h3>Copy and Paste your project to that folder</h3>

<p>Copy and paste your project files to that folder. You want to have the .xcodeproj file at the root of the repo. Do not put everything in a folder as the only thing it will do is annoy you users.</p>

<h3>Commit and Push</h3>

<p>Add your newly added files to git, commit and push to github.</p>

<figure class='code'><div class="highlight"><table><tr></pre></td><td class='code'><pre><code class=''><span class='line'>git add .
</span><span class='line'>git commit -a -m "Initial Commit"
</span><span class='line'>git push origin master</span></code></pre></td></tr></table></div></figure>


<p>Your project is now open-sourced and people can start using it! But for it to be really easy to use and install you want to make it available on <a href="http://cocoapods.org">CocoaPods</a>.</p>

<h2>CocoaPods</h2>

<p>CocoaPods is to Objective-C what gems are to Ruby. You can list in the root of your project the &ldquo;pods&rdquo; you need and CocoaPods will download them and install them for you.</p>

<p>Start by installing CocoaPods if it is not already installed on your mac.</p>

<h3>Create the .podspec file.</h3>

<p>You need to create at the root of your repo a file that is a recipe for CocoaPods to use your classes.</p>

<p>Navigate to your project folder in a terminal window and ask CocoaPods to create a staring pod spec for you:</p>

<figure class='code'><div class="highlight"><table><tr></pre></td><td class='code'><pre><code class=''><span class='line'>pod spec create NHSlidingController</span></code></pre></td></tr></table></div></figure>


<p>open that file and start filling it with the informations on your project.</p>

<p>It is important to use a version number. I usually start with 0.1.0 but this is up to you.</p>

<p>The <code>source</code> line is also important it is the line that tell CocoaPods where your project resides on the internet.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr></pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">s</span><span class="o">.</span><span class="n">source</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">:git</span> <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/nilsou/NHAlignmentFlowLayout.git&quot;</span><span class="p">,</span> <span class="ss">:tag</span> <span class="o">=&gt;</span> <span class="s2">&quot;0.1.0&quot;</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>You also need to tell CocoaPods which files in your repo are relevant so that it does not copy any unneeded demo/example file.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr></pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="n">s</span><span class="o">.</span><span class="n">source_files</span> <span class="o">=</span> <span class="s1">&#39;NHAlignmentFlowLayout/*.{h,m}&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Validate the .podspec file</h3>

<p>Then we are going to verify the validity of your .podspec file.</p>

<p>You noticed that in <code>s.source</code> we point to a specific tag in our repo. You need to create a tag for CocoaPods to be able to find your code. A tag is an absolute reference across branches to a state of your code in time. They&rsquo;re often used for versioning and that&rsquo;s what CocoaPods use them for.</p>

<p>Create the tag locally and then push it to Github. In your terminal window enter:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr></pre></td><td class='code'><pre><code class='bash'><span class='line'>git tag 0.1.0 -m <span class="s2">&quot;0.1.0 - Initial release&quot;</span>
</span><span class='line'>git push origin master -tags
</span></code></pre></td></tr></table></div></figure>


<p>Then you want to make sure that you .podspec file works. To do so use the <code>pod spec lint command</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr></pre></td><td class='code'><pre><code class='bash'><span class='line'>pod spec lint NHAlignmentFlowLayout.podspec
</span></code></pre></td></tr></table></div></figure>


<p>This will try to download the pod you just created from the address you supplied in the podspec file. You should get something like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr></pre></td><td class='code'><pre><code class='bash'><span class='line'>NHAlignmentFlowLayout.podspec passed validation.
</span></code></pre></td></tr></table></div></figure>


<p>Commit that file to git and push it to Github.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr></pre></td><td class='code'><pre><code class='bash'><span class='line'>git add .
</span><span class='line'>git commit -a -m <span class="s2">&quot;Added .podspec file&quot;</span>
</span><span class='line'>git push origin master
</span></code></pre></td></tr></table></div></figure>


<h3>Add you .podspec to the master Specs repo</h3>

<p>All .podspecs files are kept in a central to repo called Specs. You need to fork that repo, add your pod specs to it and then issue a pull request for it to be merged. DOn&rsquo;t worry it&rsquo;s really easy.</p>

<h4>Fork the Specs Repo and clone it to your mac</h4>

<p>Go to the <a href="https://github.com/CocoaPods/Specs">Specs Github Repo</a> and Press the Fork Button on the top right corner. This will create a copy of the Specs repo in your account.</p>

<p>Clone the forked repo on you computer to be able to modify it.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr></pre></td><td class='code'><pre><code class='bash'><span class='line'>git clone https://github.com/nilsou/Specs.git
</span></code></pre></td></tr></table></div></figure>


<h4>Add your .podspec and push it to your fork</h4>

<p>Create a folder named with the name of you pod. for me it is <code>NHAlignmentLayout</code>
Create a subfolder with the name of your tag <code>0.1.0</code> for me.
Copy the .podspec file you created earlier in that folder.</p>

<p>Commit and push your changes to you forked repo:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr></pre></td><td class='code'><pre><code class='bash'><span class='line'>git add .
</span><span class='line'>git commit -a -m <span class="s2">&quot;Added NHAlignmentLayout&quot;</span>
</span><span class='line'>git push origin master
</span></code></pre></td></tr></table></div></figure>


<h4>Create the pull request</h4>

<p>Go to the forked Specs repo on github. Press the Comparison button, next to the name of the current branch. :</p>

<p><img src="http://farm6.staticflickr.com/5479/9340191074_1a6f3ae4d0_o.png" alt="Pull request button" /></p>

<p>This will initiate the comparison between your current repo and the original repo.</p>

<p>Review the changes, you should see the content of you .podspec file in green, meaning that this was added.</p>

<p>Press the <code>Click to create a pull request for this comparison</code> Button.</p>

<p><img src="http://farm3.staticflickr.com/2874/9337404161_38396a3a23_o.png" alt="Click to create a pull request for this comparison" /></p>

<p>This will send a pull request to the owners of the Specs repo. They are usually <em>extremely</em> quick to merge the pull request!</p>

<p>Once your pull request is approved you can start using your pod in other projects.</p>

<p>Now, go share your code!</p>
</div>
	

</article>

	
	<div class="share">
		<ul>
			<li>
  <a href="https://twitter.com/intent/tweet?text=Open source Objective-C code with Github and CocoaPods by @nilsou&url=http://nilsou.github.io/blog/2013/07/21/how-to-open-source-objective-c-code/" title="Share Open source Objective-C code with Github and CocoaPods on Twitter">
    <img src="/images/social/twitter.png" />
  </a>
</li>

			<!-- <li>
  <a href="https://www.facebook.com/sharer.php?u=http://nilsou.github.io/blog/2013/07/21/how-to-open-source-objective-c-code/" title="Share Open source Objective-C code with Github and CocoaPods on Facebook">
    <img src="/images/social/facebook.png" />
  </a>
</li>
 -->
			<!-- <li>
  <a href="https://plus.google.com/share?url=http://nilsou.github.io/blog/2013/07/21/how-to-open-source-objective-c-code/" title="Share Open source Objective-C code with Github and CocoaPods on Google Plus">
    <img src="/images/social/google.png" />
  </a>
</li>
 -->
		</ul>
	</div>



</div>
	<footer id="footer" class="inner">&copy; 2013

    Nils Hayat

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/hyphenator.js"></script>




	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-42610953-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>




</body>
</html>
